{"version":3,"sources":["scripts/main.js"],"names":["prevIndex","table","document","querySelector","body","sort","e","indexOfTitle","sortedRows","target","cellIndex","allRows","querySelectorAll","tagName","x","y","prevObj","innerText","nextObj","isNaN","slice","split","join","localeCompare","append","switchActive","children","map","parentElement","classList","add","remove","addEventListener","form","createElement","method","insertAdjacentHTML","errorText","validateForm","nameInValue","value","ageInValue","length","addNotification","className","notification","dataset","qa","bodyMain","message","style","cssText","color","addRow","preventDefault","data","FormData","salaryArr","get","count","i","newSalary","setTimeout","reset","editCell","saveText","input","setAttribute","focus","key","blur","lastEditingInput","innerHTML"],"mappings":"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","file":"main.80e12213.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst body = document.querySelector('tbody');\nlet prevIndex;\n\nfunction sort(e) {\n  const indexOfTitle = e.target.cellIndex;\n  const allRows = body.querySelectorAll('tr');\n  let sortedRows;\n\n  if (e.target.tagName === 'TH') {\n    if (prevIndex !== indexOfTitle) {\n      sortedRows = [...allRows].sort((x, y) => {\n        let prevObj = x.querySelectorAll('td')[indexOfTitle].innerText;\n        let nextObj = y.querySelectorAll('td')[indexOfTitle].innerText;\n\n        if (prevObj[0] === '$' || nextObj[0] === '$') {\n          prevObj = +prevObj.slice(1).split(',').join('.');\n          nextObj = +nextObj.slice(1).split(',').join('.');\n        };\n\n        return isNaN(prevObj || nextObj)\n          ? prevObj.localeCompare(nextObj)\n          : prevObj - nextObj;\n      });\n    };\n\n    if (prevIndex === indexOfTitle) {\n      sortedRows = [...allRows].sort((x, y) => {\n        let prevObj = x.querySelectorAll('td')[indexOfTitle].innerText;\n        let nextObj = y.querySelectorAll('td')[indexOfTitle].innerText;\n\n        if (prevObj[0] === '$') {\n          prevObj = +prevObj.slice(1).split(',').join('.');\n          nextObj = +nextObj.slice(1).split(',').join('.');\n        };\n\n        return isNaN(prevObj)\n          ? nextObj.localeCompare(prevObj)\n          : nextObj - prevObj;\n      });\n\n      prevIndex = -1;\n      body.append(...sortedRows);\n\n      return;\n    };\n\n    prevIndex = e.target.cellIndex;\n    body.append(...sortedRows);\n\n    return;\n  };\n};\n\nfunction switchActive(e) {\n  [...this.children].map(x => {\n    if (x === e.target.parentElement) {\n      x.classList.add('active');\n    } else {\n      x.classList.remove('active');\n    };\n\n    return x;\n  });\n};\n\ntable.addEventListener('click', sort);\nbody.addEventListener('click', switchActive);\n\nconst form = document.createElement('form');\n\nform.method = 'POST';\nform.classList.add('new-employee-form');\n\nform.insertAdjacentHTML('afterbegin', `\n  <label>Name: <input name=\"name\" type=\"text\" data-qa=\"name\" required></label>\n  <label>Position: <input\n    name=\"position\"\n    type=\"text\"\n    data-qa=\"position\"\n    required>\n  </label>\n  <label>Office: <select name=\"office\">\n    <option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Singapore\" selected>Singapore</option>\n    <option value=\"London\">London</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"Edinburgh\">Edinburgh</option>\n    <option value=\"San Francisco\">San Francisco</option>\n  </select>\n  </label>\n  <label>Age: <input\n    name=\"age\"\n    type=\"number\"\n    data-qa=\"age\"\n    step=\"1\"\n    required>\n  </label>\n  <label>Salary: <input\n    name=\"salary\"\n    type=\"number\"\n    data-qa=\"salary\"\n    required>\n  </label>\n\n  <button type=\"submit\">Save to table</button>\n`);\ndocument.querySelector('body').append(form);\n\nlet errorText = '';\n\nfunction validateForm() {\n  const nameInValue = document\n    .querySelector('.new-employee-form')['name']\n    .value;\n  const ageInValue = document.querySelector('.new-employee-form')['age'].value;\n\n  if (nameInValue.length <= 3) {\n    errorText = 'The name must contain more than 4 characters';\n\n    return false;\n  }\n\n  if (ageInValue < 18) {\n    errorText = 'Only adults can edit the table';\n\n    return false;\n  }\n\n  if (ageInValue > 90) {\n    errorText = 'Your age is over 90';\n\n    return false;\n  } else {\n    return true;\n  };\n};\n\nfunction addNotification(className) {\n  const notification = document.createElement('div');\n\n  notification.dataset.qa = 'notification';\n\n  const bodyMain = document.querySelector('body');\n\n  notification.classList.add(className);\n\n  let message;\n\n  notification.style.cssText = `\n      position: absolute;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100vw;\n      font-size: 20px;\n      top: 40px;\n      left: 0px;`;\n\n  if (className === 'error') {\n    message = errorText;\n    notification.style.color = 'red';\n  }\n\n  if (className === 'success') {\n    message = 'A new employee has been added';\n    notification.style.color = 'green';\n  };\n\n  notification.append(message);\n  bodyMain.append(notification);\n}\n\nfunction addRow(e) {\n  e.preventDefault();\n\n  if (validateForm()) {\n    const data = new FormData(form);\n    const salary = data.get('salary');\n    const salaryArr = salary.split('');\n    let count = 0;\n\n    for (let i = salaryArr.length - 1; i >= 0; i--) {\n      count++;\n\n      if (count === 3) {\n        if (i !== 0) {\n          salaryArr[i] = ',' + salaryArr[i];\n        }\n        count = 0;\n      };\n    };\n\n    const newSalary = '$' + salaryArr.join('');\n\n    body.insertAdjacentHTML('afterBegin', `\n    <tr>\n      <td>${data.get('name')}</td>\n      <td>${data.get('position')}</td>\n      <td>${data.get('office')}</td>\n      <td>${data.get('age')}</td>\n      <td>${newSalary}</td>\n    </tr>\n    `);\n\n    addNotification('success');\n\n    setTimeout(() => {\n      document.querySelector('.success').remove();\n      document.querySelector('.new-employee-form').reset();\n    }, 2000);\n  } else {\n    addNotification('error');\n\n    setTimeout(() => {\n      document.querySelector('.error').remove();\n    }, 2000);\n  };\n};\n\nform.addEventListener('submit', addRow);\n\nfunction editCell(e) {\n  if (e.target.tagName === 'TD') {\n    if (table.querySelector('input')) {\n      saveText();\n    };\n\n    const input = document.createElement('input');\n\n    input.setAttribute('value', e.target.innerText);\n    input.classList.add('cell-input');\n\n    e.target.innerText = '';\n    e.target.append(input);\n\n    input.focus();\n\n    input.addEventListener('blur', () => {\n      saveText();\n    });\n\n    input.addEventListener('keypress', () => {\n      if (e.key === 'Enter') {\n        input.blur();\n      }\n    });\n  }\n\n  function saveText() {\n    const lastEditingInput = table.querySelector('input');\n\n    lastEditingInput.parentElement.innerHTML = `\n      ${lastEditingInput.value}\n    `;\n  }\n}\n\ntable.addEventListener('dblclick', editCell);\n"]}